.f-c-b-orders-catalogue
  = catalogue(model, before_lambda: options[:before_lambda],
                     collection_actions: options[:collection_actions])
    ruby:
      show_link(:number)

      attribute(:email)

      attribute(:line_items) do
        content_tag(:div, class: "d-flex align-items-center") do
          ary = []

          if record.gift?
            ary <<  cell('boutique/ui/vector_icon',
                         icon_name: :gift,
                         class: 'mr-2 flex-shrink-0',
                         size: 18).show
          end

          ary << content_tag(:div,
                             record.line_items.map(&:to_console_label).join(", "),
                             class: "flex-grow-1 flex-shrink-1")

          ary.join(" ")
        end
      end

      attribute(:price) do
        price(record.total_price)
      end

      date :confirmed_at
      date :paid_at

      state

      attribute(:invoice, compact: true) do
        if record.invoice_number?
          link_to(record.invoice_number,
                  controller.boutique.invoice_path(record.secret_hash),
                  target: "_blank")
        end
      end

      actions(:show, :edit)

      action = record.class.console_additional_index_action(record, self)
      if action.present?
        attribute(:actions, compact: true) do
          link_to("",
                  action[:url],
                  title: t("folio.console.actions.#{action[:name]}}"),
                  class: "btn btn-light fa fa-#{action[:icon]} ml-n3",)
        end
      end
